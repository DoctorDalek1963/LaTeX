\usepackage[UKenglish]{babel}  % UK writing style
\usepackage{inputenc}

% Set size of text area with total parameter
\usepackage[a4paper, top=15mm, bottom=18mm, left=15mm, right=15mm]{geometry}

\usepackage{amsmath, amssymb}
\newtheorem{theorem}{Theorem}[section]

% Taken from: https://tex.stackexchange.com/a/14072/269413
% This allows me to add a custom arraystretch for a specific matrix
\makeatletter
\renewcommand*\env@matrix[1][\arraystretch]{%
	\edef\arraystretch{#1}%
	\hskip -\arraycolsep
	\let\@ifnextchar\new@ifnextchar
	\array{*\c@MaxMatrixCols c}}
\makeatother

\usepackage[hidelinks]{hyperref}
\usepackage{float}

\usepackage{xcolor}
\usepackage{graphicx}

\usepackage{tikz}
\usepackage{tkz-euclide}
\usetikzlibrary{
	arrows.meta,
	calc,
	decorations.pathreplacing,
	fit,
	graphs,
	math,
	matrix,
	positioning,
}
\tikzmath{
	\npi = 3.1415926535897;
	\rtwot = sqrt(2)/2;
	\rthot = sqrt(3)/2;
}

\def\cosec{\mathop{\rm cosec}\nolimits}

\newcommand{\diffd}{\ensuremath{\operatorname{d}\!}}
\newcommand{\diff}[1]{\frac{\diffd}{\diffd #1}}
\newcommand{\inte}[2]{\int #1 \ \diffd #2}
\newcommand{\constraint}[1]{\textcolor{darkgray}{\ensuremath\left( #1 \right)}}

\newcommand{\booktitle}[1]{%
	\begin{center}
		\Huge\textbf{\underline{#1}}\normalsize
	\end{center}

	\tableofcontents
	\setlength{\parindent}{0em}
	\setlength{\parskip}{1em}
	\newpage
}

\newcommand{\topictitle}[1]{%
	\phantomsection
	\begin{center}
		\Huge\textbf{#1}\normalsize
	\end{center}
	\addcontentsline{toc}{subsection}{\protect\numberline{}#1}
}

\newcommand{\sectitle}[1]{%
	\phantomsection
	\vspace*{0.8em}
	\begin{center}
		\Large
		\textsl{\underline{#1}}
		\normalsize
	\end{center}
	\vspace*{0.5em}
	\addcontentsline{toc}{subsubsection}{\protect\numberline{}#1}
}

\newcommand{\steptitle}[1]{%
	\textbf{\underline{Step #1}}
	\vspace{-0.5ex}
}

\newcounter{techniquecounter}

\newcommand{\technique}[1]{
	\refstepcounter{techniquecounter}
	\textbf{\underline{Technique \arabic{techniquecounter}: #1\label{technique:#1}}}
	\vspace{-0.5ex}
}

\usepackage{fancybox}
\usepackage{empheq}

\newsavebox{\saveboxM} % Maths
\newsavebox{\saveboxT} % Text
% name, colour, content
\newcommand*\genericNamedBox[3]{%
	\sbox{\saveboxM}{#3}%
	\sbox{\saveboxT}{\fcolorbox{black}{#2}{#1}}%
	\sbox{\saveboxM}{%
		\parbox[b][\ht\saveboxM + 0.5\ht\saveboxT + 0.5\dp\saveboxT][b]{%
		\wd\saveboxM}{#3}%
	}%
	\sbox{\saveboxM}{%
		\fbox{%
			\makebox[\wd\saveboxM + 2em]{\usebox{\saveboxM}}%
		}%
	}%
	\usebox{\saveboxM}%
	\makebox[0pt][r]{%
		\makebox[\wd\saveboxM][c]{%
			\raisebox{\ht\saveboxM - 0.5\ht\saveboxT
			+ 0.5\dp\saveboxT-0.5\fboxrule}{\usebox{\saveboxT}}%
		}%
	}%
}

\newcommand{\formulaBookBox}[1]{\genericNamedBox{Formula Book}{blue!25}{#1}}
\newcommand{\rememberBox}[1]{\genericNamedBox{Remember}{red!65}{#1}}

% This is used to allow for separate files for each section
% It should be the last thing imported in the preamble
\usepackage{subfiles}
